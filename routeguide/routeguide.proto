syntax = "proto3";

package routeguide;
option go_package = "routeguide/routeguide";

// RouteGuide service provides geographical feature lookup functionality
service RouteGuide {
    // Obtains the feature at a given position.
    rpc GetFeature(Point) returns (Feature) {}

    // A server-to-client streaming RPC
    // Client sends a rectangel and the Server returns all features within given rectangle. 
    // Results are returned as a instead of returned all at once
    rpc ListFeatures(Rectangle) returns (stream Feature) {}

    // A client-to-server streaming RPC
    // Client sends a stream of points of its route
    // and server returns a route summary
    rpc RecordRoute(stream Point) returns (RouteSummary){}

    // A bi-directional streaming RPC that allows both client and server
    // to receive route notes
    rpc RouteChat(stream RouteNote) returns (stream RouteNote){}
}

// Point represents a geographical coordinate pair
message Point {
    int32 latitude = 1;   
    int32 longitude = 2;
}

// Feature represents a named geographical location
message Feature {
    string name = 1;
    Point location = 2;   
}

message Rectangle {
    Point bottomLeftCorner = 1;
    Point topRightCorner = 2;
}

message RouteSummary {
    int32 point_count = 1;
    int32 feature_count = 2;
}

message RouteNote {
    Point location = 1;
    string message = 2;
}
